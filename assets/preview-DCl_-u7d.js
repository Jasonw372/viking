var c=Object.defineProperty;var n=(s,e,t)=>e in s?c(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var a=(s,e,t)=>n(s,typeof e!="symbol"?e+"":e,t);import{j as i}from"./jsx-runtime-Cf8x2fCZ.js";import"./index-yBjzXJbu.js";const o=class o{constructor(){a(this,"currentTheme","light");this.currentTheme=this.getInitialTheme(),this.applyTheme(this.currentTheme),this.watchSystemTheme()}static getInstance(){return o.instance||(o.instance=new o),o.instance}getInitialTheme(){const e=localStorage.getItem("theme");return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}watchSystemTheme(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("theme")||this.setTheme(e.matches?"dark":"light")})}getTheme(){return this.currentTheme}setTheme(e){this.currentTheme=e,this.applyTheme(e),localStorage.setItem("theme",e)}toggleTheme(){const e=this.currentTheme==="light"?"dark":"light";this.setTheme(e)}applyTheme(e){document.documentElement.setAttribute("data-theme",e);const t=document.querySelector('meta[name="theme-color"]');t&&t.setAttribute("content",e==="dark"?"#212529":"#ffffff")}};a(o,"instance");let m=o;const h=m.getInstance(),l=()=>({theme:h.getTheme(),toggleTheme:()=>h.toggleTheme(),setTheme:r=>h.setTheme(r)}),T={parameters:{controls:{matchers:{color:/(background|color)$/i,date:/Date$/i}}},globalTypes:{theme:{name:"Theme",description:"全局主题设置",defaultValue:"light",toolbar:{icon:"circlehollow",items:[{value:"light",icon:"sun",title:"亮色模式"},{value:"dark",icon:"moon",title:"暗色模式"}],showName:!0}}},decorators:[(s,e)=>{const{theme:t}=e.globals,{setTheme:r}=l();return r(t),i.jsx("div",{className:"storybook-preview",children:s()})}],tags:["autodocs","autodocs"]};export{T as default};
